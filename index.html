<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Material Quotation</title>
</head>
<body>
    <form id="quote-form">
        <label lang-switch="material">Material:</label>
        <select id="material"></select>
        
        <label lang-switch="state">State:</label>
        <select id="state"></select>
        
        <label lang-switch="supplier">Supplier:</label>
        <select id="supplier"></select>

        <label lang-switch="density">Density (kg/m³):</label>
        <input type="number" id="density" readonly>
        
        <label lang-switch="price">Price per kg ($):</label>
        <input type="number" id="price" readonly>
        
        <label lang-switch="length">Length (m):</label>
        <input type="number" id="length" step="0.01">
        
        <label lang-switch="width">Width (m):</label>
        <input type="number" id="width" step="0.01">
        
        <label lang-switch="height">Height (m):</label>
        <input type="number" id="height" step="0.01">
        
        <label lang-switch="quantity">Quantity:</label>
        <input type="number" id="quantity">
        
        <button type="submit" lang-switch="submit">Submit</button>
    </form>
    
    <div id="result"></div>
    <div id="contact"></div>
    
    <button id="lang-switch">Switch Language</button>

    <script>
        let currentLang = 'en';
        const translations = {
            en: {
                material: "Material",
                state: "State",
                supplier: "Supplier",
                density: "Density (kg/m³)",
                price: "Price per kg ($)",
                length: "Length (m)",
                width: "Width (m)",
                height: "Height (m)",
                quantity: "Quantity",
                submit: "Submit",
                results: "Results",
                id: "ID:",
                volume: "Volume:",
                weight: "Weight:",
                totalPrice: "Total Price:",
                fillAllFields: "Please fill all fields"
            },
            zh: {
                material: "材料",
                state: "州",
                supplier: "供应商",
                density: "密度 (kg/m³)",
                price: "每公斤价格 ($)",
                length: "长度 (m)",
                width: "宽度 (m)",
                height: "高度 (m)",
                quantity: "数量",
                submit: "提交",
                results: "结果",
                id: "ID:",
                volume: "体积:",
                weight: "重量:",
                totalPrice: "总价格:",
                fillAllFields: "请填写所有字段"
            }
        };

        const materials = {
            steel: { name: { en: "Steel", zh: "钢" }, density: 7850, price: 0.5 },
            aluminum: { name: { en: "Aluminum", zh: "铝" }, density: 2700, price: 1.5 },
            copper: { name: { en: "Copper", zh: "铜" }, density: 8960, price: 6.0 }
        };

        const suppliers = {
            steel: {
                NSW: [
                    { name: "BlueScope", email: "info@bluescope.com", address: "12 BlueScope St, NSW", phone: "02-1234-5678", contact: "John Doe" },
                    { name: "Liberty Steel", email: "sales@liberty.com", address: "34 Liberty Ave, NSW", phone: "02-8765-4321", contact: "Jane Smith" }
                ],
                VIC: [
                    { name: "VIC Steel", email: "vicsteel@supplies.com", address: "56 Steel Rd, VIC", phone: "03-1234-5678", contact: "Peter Parker" }
                ]
            },
            aluminum: {
                NSW: [
                    { name: "Capral Aluminium", email: "contact@capral.com", address: "78 Aluminium Blvd, NSW", phone: "02-9876-5432", contact: "Mary Johnson" }
                ],
                VIC: [
                    { name: "VIC Aluminium", email: "info@vicalu.com", address: "90 Aluminium St, VIC", phone: "03-4321-8765", contact: "Bruce Wayne" }
                ]
            },
            copper: {
                NSW: [
                    { name: "MM Kembla", email: "sales@kembla.com", address: "12 Copper Rd, NSW", phone: "02-6543-2109", contact: "Tony Stark" }
                ],
                VIC: [
                    { name: "VIC Copper", email: "support@viccopper.com", address: "34 Copper Ln, VIC", phone: "03-5678-1234", contact: "Clark Kent" }
                ]
            }
        };

        const states = ["NSW", "VIC", "QLD", "WA", "SA", "TAS", "NT", "ACT"];

        function populateMaterials() {
            const materialSelect = document.getElementById('material');
            Object.keys(materials).forEach(materialKey => {
                const material = materials[materialKey];
                const option = document.createElement('option');
                option.value = materialKey;
                option.text = material.name[currentLang];
                materialSelect.appendChild(option);
            });
        }

        function populateStates() {
            const stateSelect = document.getElementById('state');
            states.forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.text = state;
                stateSelect.appendChild(option);
            });
        }

        function updateSuppliers() {
            const materialKey = document.getElementById('material').value;
            const stateKey = document.getElementById('state').value;
            const supplierSelect = document.getElementById('supplier');
            supplierSelect.innerHTML = '';
            const contactDiv = document.getElementById('contact');
            contactDiv.innerHTML = '';

            if (materialKey && stateKey) {
                suppliers[materialKey][stateKey].forEach(supplier => {
                    const option = document.createElement('option');
                    option.value = supplier.name;
                    option.text = supplier.name;
                    supplierSelect.appendChild(option);
                });
                supplierSelect.addEventListener('change', function () {
                    const selectedSupplier = suppliers[materialKey][stateKey].find(supplier => supplier.name === supplierSelect.value);
                    contactDiv.innerHTML = `
                        <h2>${translations[currentLang].results}</h2>
                        <p>Email: ${selectedSupplier.email}</p>
                        <p>Address: ${selectedSupplier.address}</p>
                        <p>Phone: ${selectedSupplier.phone}</p>
                        <p>Contact: ${selectedSupplier.contact}</p>
                    `;
                });
            }
        }

        function updateDensityAndPrice() {
            const materialKey = document.getElementById('material').value;
            if (materialKey) {
                const densityInput = document.getElementById('density');
                const priceInput = document.getElementById('price');
                densityInput.value = materials[materialKey].density;
                priceInput.value = materials[materialKey].price;
            }
        }

        function switchLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.querySelectorAll('[lang-switch]').forEach(element => {
                element.textContent = translations[currentLang][element.getAttribute('lang-switch')];
            });
            document.title = translations[currentLang].title;
        }

        document.getElementById('quote-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const materialKey = document.getElementById('material').value;
            const stateKey = document.getElementById('state').value;
            const supplier = document.getElementById('supplier').value;
            const density = parseFloat(document.getElementById('density').value);
            const price = parseFloat(document.getElementById('price').value);
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            const height = parseFloat(document.getElementById('height').value);
            const quantity = parseInt(document.getElementById('quantity').value);

            if (materialKey && stateKey && supplier && density && price && length && width && height && quantity) {
                const volume = length * width * height;
                const weight = volume * density;
                const totalPrice = weight * price * quantity;

                const uniqueId = generateUniqueId();

                saveResult(uniqueId, {
                    material: materials[materialKey].name[currentLang],
                    state: stateKey,
                    supplier,
                    volume,
                    weight,
                    totalPrice
                });

                displayResult(uniqueId, {
                    material: materials[materialKey].name[currentLang],
                    state: stateKey,
                    supplier,
                    volume,
                    weight,
                   
            // Displaying results
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <h2>${translations[currentLang].results}</h2>
                <p>${translations[currentLang].id} ${uniqueId}</p>
                <p>${translations[currentLang].material}: ${materials[materialKey].name[currentLang]}</p>
                <p>${translations[currentLang].state}: ${stateKey}</p>
                <p>${translations[currentLang].supplier}: ${supplier}</p>
                <p>${translations[currentLang].volume}: ${volume.toFixed(2)} m³</p>
                <p>${translations[currentLang].weight}: ${weight.toFixed(2)} kg</p>
                <p>${translations[currentLang].totalPrice}: $${totalPrice.toFixed(2)}</p>
            `;
        } else {
            alert(translations[currentLang].fillAllFields);
        }
    });

    function generateUniqueId() {
        return '_' + Math.random().toString(36).substr(2, 9);
    }

    function saveResult(id, result) {
        // Here you could save the result to a database or perform other actions
        // This function can be extended to handle more complex operations
    }

    function displayResult(id, result) {
        // This function displays the result on the webpage
        // You can customize how the result is displayed here
        // Currently handled in the submit event listener
    }

    document.addEventListener('DOMContentLoaded', function () {
        populateMaterials();
        populateStates();
        updateSuppliers();
        updateDensityAndPrice();

        document.getElementById('material').addEventListener('change', function () {
            updateDensityAndPrice();
            updateSuppliers();
        });

        document.getElementById('state').addEventListener('change', function () {
            updateSuppliers();
        });

        document.getElementById('supplier').addEventListener('change', function () {
            updateSuppliers();
        });

        document.getElementById('lang-switch').addEventListener('click', switchLanguage);
    });
</script>
